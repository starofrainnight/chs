<!DOCTYPE html><html lang=en> <head><meta charset=utf-8><title>分佈式版本控制系統SVK搭配TortoiseSVN的使用</title><meta name=viewport content="width=device-width, initial-scale=1.0"><meta name=description content><meta name=author content=starofrainnight><!-- Le styles --><link rel=stylesheet href=https://sorn.taorules.com/chs/theme/css/bootstrap.dark.css type=text/css><link rel=stylesheet href=https://sorn.taorules.com/chs/theme/css/bootstrap.dark.font-awesome-fake.css type=text/css><style type=text/css>
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }

      .tag-1 {
        font-size: 16pt;
      }
      .tag-2 {
        font-size: 14pt;
      }
      .tag-2 {
        font-size: 12pt;
      }
      .tag-4 {
        font-size: 10pt;
     }

    </style><link href=https://sorn.taorules.com/chs/theme/css/bootstrap-responsive.dark.css rel=stylesheet><link href=https://sorn.taorules.com/chs/theme/css/font-awesome-fake.css rel=stylesheet><link href=https://sorn.taorules.com/chs/theme/css/pygments.css rel=stylesheet><!-- Le HTML5 shim, for IE6-8 support of HTML5 elements --><!--[if lt IE 9]>
      <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]--><!-- Le fav and touch icons --><link rel="shortcut icon" href=https://sorn.taorules.com/chs/theme/images/favicon.ico><link rel=apple-touch-icon href=https://sorn.taorules.com/chs/theme/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=72x72 href=https://sorn.taorules.com/chs/theme/images/apple-touch-icon-72x72.png><link rel=apple-touch-icon sizes=114x114 href=https://sorn.taorules.com/chs/theme/images/apple-touch-icon-114x114.png><link href=https://sorn.taorules.com/chs/ type=application/atom+xml rel=alternate title="StarOfRainNight's Home ATOM Feed"></head> <body> <div class="navbar navbar-fixed-top"> <div class=navbar-inner> <div class=container-fluid> <a class="btn btn-navbar" data-toggle=collapse data-target=.nav-collapse> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span> </a> <a class=brand href=https://sorn.taorules.com/chs/index.html>StarOfRainNight's Home</a> <div class=nav-collapse> <ul class=nav> <li class=divider-vertical></li> <ul class="nav pull-right"> <li><a href=https://sorn.taorules.com/chs/archives.html><i class=icon-th-list></i>Archives</a></li> </ul> </ul> <!--<p class="navbar-text pull-right">Logged in as <a href="#">username</a></p>--> </div><!--/.nav-collapse --> </div> </div> </div> <div class=container-fluid> <div class=row> <div class=span9 id=content> <section id=content> <article> <header> <h1> <a href rel=bookmark title="Permalink to 分佈式版本控制系統SVK搭配TortoiseSVN的使用"> 分佈式版本控制系統SVK搭配TortoiseSVN的使用 </a> </h1> </header> <div class=entry-content> <div class=well> <footer class=post-info> <span class=label>Date</span> <abbr class=published title=9999-12-31T23:59:59.999999+08:06> 9999-12-31 23:59 </abbr> <span class=label>By</span> <a href=https://sorn.taorules.com/chs/author/starofrainnight.html>starofrainnight</a> <span class=label>Category</span> <a href=https://sorn.taorules.com/chs/category/200806122207-svkda-pei-tortoisesvnde-shi-yong.html>200806122207-SVK搭配TortoiseSVN的使用</a> </footer><!-- /.post-info --> </div> <body dir=auto> <h2 class=section id=magicparlabel-2><span class=section_label>1</span> 前言</h2> <div class=standard id=magicparlabel-3>SVK與Linus所開發的Git相似，是一種分布式的版本控制系統，但它並不是完全從頭編寫的版本控制系統，而是基於 Subversion 的分布 式的版本控制系統。如 CVS，Subversion 這些集中式管理系統存在對唯一的版本庫過分依賴的缺陷：一旦不能正常連接到集中式的版本庫，整個系 統陷入癱瘓。分布式的版本控制系統最大的好處在於可以維護分布式的版本庫，分散的開發人員可以通過 SVK 建立遠程 的 CVS，Subversion，P4 協議的版本庫鏡像，選擇工作在自己合適的鏡像版本庫，這個鏡像甚至可以是本地的，整個工作可以離線進行，然後在 需要的時候同步鏡像版本庫到主版本庫。</div> <h2 class=section id=magicparlabel-4><span class=section_label>2</span> 假定條件</h2> <ul class=itemize id=magicparlabel-5><li class=itemize_item>妳已經熟悉所有SVN的操作</li> <li class=itemize_item>c:\svnlib 為SVN的對外的倉庫根目錄，</li> <li class=itemize_item>妳機子已經安裝好SVN服務</li> <li class=itemize_item>若 c:\svnlib 下有一項目 test 倉庫(c:\svnlib\test)， 妳能正確通過TortoiseSVN讀寫其項目文件( svn://localhost/test )</li> <li class=itemize_item>網絡版本庫為 svn://192.168.1.100/MyProject.</li> </ul> <h2 class=section id=magicparlabel-10><span class=section_label>3</span> 初始化</h2> <div class=standard id=magicparlabel-11>在 c:\svnlib 下創建目錄 svklib (目錄名隨便你定義) 　　</div> <div class=standard id=magicparlabel-12>在 c:\svnlib\svklib 使用 TortoiseSVN 右鍵在此創建版本庫（注意：這一步是鏡像的基礎！因為SVK用的就是SVN的版本庫）</div> <div class=standard id=magicparlabel-13>SVK是默認在 "C:\Documents and Settings\當前用戶名\.svk\Local" 創建鏡像倉庫的，所以需要先把鏡像倉庫位置重定位到你需要的位置( 當然， 如果妳喜歡默認的位置， 那你可以跳過這一步 )　</div> <div class=standard id=magicparlabel-14><div class=Ovalbox><div class=float-listings><pre class=listings>svk depotmap --relocate // c:\svnlib\svklib</pre></div> </div></div> <div class=standard id=magicparlabel-23>上面這行命令有一個概 念， 就是depot-map – 倉庫表， 妳可以使用svk depotmap 建立多個鏡像倉庫， 而不重定位， 這裡為了方便解說並盡量減少旁枝末節的繁雜概念問題而直接把默認位置重定位了. "//" 是一個倉庫名， 類似於Linux的那個根目錄， SVK把默認路徑當作根目錄， 所有的鏡像倉庫均建立在根目錄以上. </div> <div class=standard id=magicparlabel-24>妳用 svk depotmap –list 命令就可以看到SVK的根目錄被定位到 c:\svnlib\svklib 下了。</div> <div class=standard id=magicparlabel-25>接下來我們建立一個鏡像目錄。</div> <div class=standard id=magicparlabel-26>我們必須建立一個鏡像目錄， 因為所有提交到此鏡像目錄的操作均被認為提交到網絡上的原始版本庫！！！</div> <div class=standard id=magicparlabel-27>下面這裡的 "-m test" 是設定此次操作的提交註釋，具體的詳情請參考SVK的幫助。</div> <div class=standard id=magicparlabel-28><div class=Ovalbox><div class=float-listings><pre class=listings>svk mkdir //mirror -m test</pre></div> </div></div> <h2 class=section id=magicparlabel-37><span class=section_label>4</span> 日常使用</h2> <h3 class=subsection id=magicparlabel-38><span class=subsection_label>4.1</span> 鏡像</h3> <div class=standard id=magicparlabel-39>把網絡版本庫鏡像下來。</div> <div class=standard id=magicparlabel-40><div class=Ovalbox><div class=float-listings><pre class=listings>svk mirror svn://192.168.1.100/MyProject //mirror/MyProject</pre></div> </div></div> <h3 class=subsection id=magicparlabel-49><span class=subsection_label>4.2</span> 同步</h3> <div class=standard id=magicparlabel-50>注意: 這裡不需要再輸入那個網絡路徑了， 網絡路徑在上面進行鏡像時會記錄下來的！</div> <div class=standard id=magicparlabel-51><div class=Ovalbox><div class=float-listings><pre class=listings>svk sync //mirror/MyProject</pre></div> </div></div> <div class=standard id=magicparlabel-60>由於對鏡像目錄進行修改即相當於直接提交到網絡版本庫， 因此不能直接對鏡像版本庫進行修改， 所以必須新建一個本地的挎貝(分枝)！ 注意！！ 是必須！！</div> <div class=standard id=magicparlabel-61><div class=Ovalbox><div class=float-listings><pre class=listings>svk mkdir //local
svk cp //mirror/MyProject //local/MyProject</pre></div> </div></div> <h3 class=subsection id=magicparlabel-71><span class=subsection_label>4.3</span> 取出、修改、提交</h3> <div class=standard id=magicparlabel-72>接下來你就可以使用TortoiseSVN的功能方便地對你剛才分枝下來的版本(//local/MyProject 即 svn://localhost/svklib/local/MyProject )進行取出\修改\提交了 </div> <div class=standard id=magicparlabel-73>只是要記住， 你所做的一切操作只能是修改你的本地分枝， 即SVK源代碼目錄下面那個Local下的MyProject！ </div> <div class=standard id=magicparlabel-74>當你需要把修改提交到網絡原始數據庫時，你需要先更新鏡像目錄:：</div> <div class=standard id=magicparlabel-75><div class=Ovalbox><div class=float-listings><pre class=listings>svk sync //mirror/MyProject</pre></div> </div></div> <div class=standard id=magicparlabel-84>再合併更新後的鏡像代碼到你的本地分枝上（ 記住！ 不是是把你的本地分枝合併到更新後的鏡像！）：</div> <div class=standard id=magicparlabel-85><div class=Ovalbox><div class=float-listings><pre class=listings>svk smerge //mirror/RabirdHospital //local/RabirdHospital</pre></div> </div></div> <div class=standard id=magicparlabel-94>合併後，再把合並好的分枝合併到鏡像（這時它需要連接網絡並更新到網絡版本庫，再次提醒，鏡像即相當於網絡版本庫， 所有修改會即時反映到網絡版本庫！ ）</div> <div class=standard id=magicparlabel-95><div class=Ovalbox><div class=float-listings><pre class=listings>svk smerge //local/RabirdHospital //mirror/RabirdHospital</pre></div> </div></div> <div class=standard id=magicparlabel-104>再提交妳的代碼，此過程會自動 Merge 妳的修改到遠程版本庫。</div> <div class=standard id=magicparlabel-105><div class=Ovalbox><div class=float-listings><pre class=listings>svk push //local/RabirdHospital</pre></div> </div></div> <div class=standard id=magicparlabel-114>記得， 修改鏡像庫時， 必須且只能使用SVK的方法， 否則更新不能被更新到網絡版本庫！</div> <div class=standard id=magicparlabel-115>各種關係及操作如圖<a href=#fig_image1>1</a>。</div> <div class=float-figure><div class=plain_layout id=magicparlabel-120 style="text-align: center;"><img alt="image: " src=/mnt/data/sources/projects/blogs/chs/content/articles/200806122207-SVK搭配TortoiseSVN的使用/resource/images/operation_relations.eps> <span class="float-caption-Standard float-caption float-caption-standard">圖 1: <a id=fig_image1></a> 操作關係</span></div> </div> </body> </div><!-- /.entry-content --> <div class=comments> <h2>Comments !</h2> <div id=disqus_thread></div> <script>
                        /**
                         *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
                         *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
                         */
                        /*
                        var disqus_config = function () {
                                this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
                                this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
                        };
                        */
                        (function() {  // REQUIRED CONFIGURATION VARIABLE: EDIT THE SHORTNAME BELOW
                                var d = document, s = d.createElement('script');

                                s.src = 'https://starofrainnightcht.disqus.com/embed.js';  // IMPORTANT: Replace EXAMPLE with your forum shortname!

                                s.setAttribute('data-timestamp', +new Date());
                                (d.head || d.body).appendChild(s);
                        })();
                        </script> <noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript rel=nofollow>comments powered by Disqus.</a></noscript> </div> </article> </section> </div><!--/span--> <div class="span3 well sidebar-nav" id=sidebar> <ul class="nav nav-list"> <li class=nav-header><h4>blogroll</h4></li> <li><a href=/eng>My English Blog</a></li> <li class=nav-header><h4>Categories</h4></li> <li> <a href=https://sorn.taorules.com/chs/category/compilation.html> compilation </a> </li> <li> <a href=https://sorn.taorules.com/chs/category/development.html> development </a> </li> <li> <a href=https://sorn.taorules.com/chs/category/li-cai.html> 理財 </a> </li> <li> <a href=https://sorn.taorules.com/chs/category/principle.html> principle </a> </li> <li> <a href=https://sorn.taorules.com/chs/category/scm.html> SCM </a> </li> <li> <a href=https://sorn.taorules.com/chs/category/sheng-huo-dian-di.html> 生活點滴 </a> </li> <li> <a href=https://sorn.taorules.com/chs/category/technique.html> technique </a> </li> <li> <a href=https://sorn.taorules.com/chs/category/xin-qing.html> 心情 </a> </li> <li> <a href=https://sorn.taorules.com/chs/category/you-xi-kai-fa.html> 游戏开发 </a> </li> <li class=nav-header><h4>Tags</h4></li> <li class=tag-1> <a href=https://sorn.taorules.com/chs/tag/network.html> network </a> </li> <li class=tag-1> <a href=https://sorn.taorules.com/chs/tag/mingw.html> mingw </a> </li> <li class=tag-4> <a href=https://sorn.taorules.com/chs/tag/ubifs.html> ubifs </a> </li> <li class=tag-4> <a href=https://sorn.taorules.com/chs/tag/freescale.html> freescale </a> </li> <li class=tag-4> <a href=https://sorn.taorules.com/chs/tag/mx27.html> mx27 </a> </li> <li class=tag-4> <a href=https://sorn.taorules.com/chs/tag/sip.html> sip </a> </li> <li class=tag-4> <a href=https://sorn.taorules.com/chs/tag/rtp.html> rtp </a> </li> <li class=tag-4> <a href=https://sorn.taorules.com/chs/tag/wxsqlite.html> wxsqlite </a> </li> <li class=tag-4> <a href=https://sorn.taorules.com/chs/tag/svk.html> svk </a> </li> <li class=tag-4> <a href=https://sorn.taorules.com/chs/tag/svn.html> svn </a> </li> <li class=tag-4> <a href=https://sorn.taorules.com/chs/tag/tortoisesvn.html> tortoisesvn </a> </li> <li class=tag-4> <a href=https://sorn.taorules.com/chs/tag/otl.html> otl </a> </li> <li class=tag-4> <a href=https://sorn.taorules.com/chs/tag/sqlite.html> sqlite </a> </li> <li class=tag-4> <a href=https://sorn.taorules.com/chs/tag/database.html> database </a> </li> <li class=tag-4> <a href=https://sorn.taorules.com/chs/tag/ndis.html> ndis </a> </li> </ul> </div><!--/.well --> </div><!--/row--> <hr> <footer> <address id=about> Proudly powered by <a href=http://pelican.notmyidea.org/ >Pelican</a>, which takes great advantage of <a href=http://python.org>Python</a>. <br>The theme is based on <a href=http://twitter.github.com/bootstrap/ >Bootstrap from Twitter</a>, and <a href=http://fortawesome.github.com/Font-Awesome/ >Font-Awesome</a>, thanks! </address><!-- /#about --> </footer> </div><!--/.fluid-container--> <script id=dsq-count-scr src=//starofrainnightcht.disqus.com/count.js async></script> <!-- Le javascript --> <!-- Placed at the end of the document so the pages load faster --> <script src=https://sorn.taorules.com/chs/theme/js/jquery-1.7.2.min.js></script> <script src=https://sorn.taorules.com/chs/theme/js/bootstrap.min.js></script> </body> </html>